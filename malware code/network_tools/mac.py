#!/usr/bin/env python3
import subprocess
import time
def mac(a):
    print(a);time.sleep(2)
    try:
        c=subprocess.check_output("ifconfig {}".format(a),shell=True).decode('UTF-8')

        l=re.search(r"\w\w:\w\w:\w\w:\w\w:\w\w:\w\w",c)
        return(l.group(0))
    except:
        return (1)



def mac_changer():
    ch="y"
    while(ch=="y" or ch=="yes"):
        subprocess.call("ifconfig",shell=True)
        while(True):
            a=input("interface >").strip()
            if len(a)<0:
                print("enter the interface")
            else:
                break
        while(True):
            b=input("new mac address > ").strip()
            if int(b.split(":")[0])%2==0 and len(b)>0:
                break
            else:
                print("first block of mac must be only even")
        subprocess.run("clear")
        print("+Changing Mac Address to {}".format(b))
        subprocess.call("sudo ifconfig {} down".format(a),shell=True)
        subprocess.call("sudo ifconfig  {} hw ether {}".format(a,b),shell=True)
        subprocess.call("sudo ifconfig {} up ".format(a),shell=True)
        c=mac(a)
        print(b,"||",c)
        time.sleep(3)
        if c==b:
            print("+mac changed from {}to{}".format(c,b))
            time.sleep(2)
            break
        else:
            print("mac adress not changed")
            ch=input("Do You Want to Try Again?[y/yes]").lower()
    print("Entering to Main Menu.......")
    time.sleep(2)
mac_changer()
